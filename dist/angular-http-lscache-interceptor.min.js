!function(){var a=window.angular.module("http-lscache-interceptor",[]);a.factory("http-lscache-interceptor",["$q","$log",function(a,b){function c(a){function b(a){if(a)for(var b in a)c+="-"+b+"="+a[b]}var c;return a.lscacheExtra.key?a.lscacheExtra.key:(c=a.url+"-"+a.method,b(a.params),b(a.data),c)}function d(a,b,c,d){return{data:a||{},config:b||{},status:c||200,statusText:d||"OK"}}var e=window.lscacheExtra;return e?{request:function(b){var d,f,g;return b.lscacheExtra&&(d=c(b),f=e.get(d,!0),f&&(b.lscacheExtra.cachedData=f,g=a.defer(),g.resolve(),b.timeout=g.promise)),b},response:function(a){var b,d=a.config.lscacheExtra;return d&&(d.ttlUnitMs&&e.setExpiryUnitMs(d.ttlUnitMs),b=d.ttl||10,e.set(c(a.config),a.data,b)),a},responseError:function(b){var f,g=b.config&&b.config.lscacheExtra&&b.config.lscacheExtra.cachedData;return g||(g=e.get(c(b.config),!0,!0),g&&(b.config.lscacheExtra.resultWasExpired=!0)),g?(delete b.config.lscacheExtra.cachedData,b.config.lscacheExtra.resultWasCached=!0,f=a.defer(),f.resolve(d(g,b.config)),f.promise):a.reject(b)}}:(b.error("http-cache-interceptor exiting because window.lscacheExtra is undefined"),{})}])}();