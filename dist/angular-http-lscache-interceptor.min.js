!function(){var a=window.angular.module("http-lscache-interceptor",["lscacheExtra"]);a.factory("http-lscache-interceptor",["$q","$log","lscacheExtra",function(a,b,c){function d(a){function b(a){if(a)for(var b in a)c+="-"+b+"="+a[b]}var c;return a.lscacheExtra.key?a.lscacheExtra.key:(c=a.url+"-"+a.method,b(a.params),b(a.data),c)}function e(a,b,c,d){return{data:a||{},config:b||{},status:c||200,statusText:d||"OK"}}return{request:function(b){var e,f,g;return b.lscacheExtra&&(e=d(b),f=c.get(e,!0),f&&(b.lscacheExtra.cachedData=f,g=a.defer(),g.resolve(),b.timeout=g.promise)),b},response:function(a){var b,e=a.config.lscacheExtra;return e&&(e.ttlUnitMs&&c.setExpiryUnitMs(e.ttlUnitMs),b=e.ttl||10,c.set(d(a.config),a.data,b)),a},responseError:function(b){var f,g=b.config&&b.config.lscacheExtra&&b.config.lscacheExtra.cachedData;return g||(g=c.get(d(b.config),!0,!0),g&&(b.config.lscacheExtra.resultWasExpired=!0)),g?(delete b.config.lscacheExtra.cachedData,b.config.lscacheExtra.resultWasCached=!0,f=a.defer(),f.resolve(e(g,b.config)),f.promise):a.reject(b)}}}])}();